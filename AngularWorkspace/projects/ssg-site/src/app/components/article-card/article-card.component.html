<!--
  [REFINED CARD CONTAINER]
  - 保持了您喜愛的毛玻璃與陰影風格
-->
<div class="break-inside-avoid mb-8 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 bg-card backdrop-blur-md border border-border-default dark:ring-1 dark:ring-white/10">

  <a [routerLink]="article.route" class="block group">

    <!--
      [IMAGE CONTAINER]
      - 優化：不再需要執行時解析 HTML 字串
      - 直接檢查 coverImage 是否存在
    -->
    <ng-container *ngIf="article.markdownData.coverImage">
      <img
        class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-105"
        [src]="article.markdownData.coverImage"
        [alt]="article.markdownData.meta.title"
        loading="lazy"
      />
    </ng-container>

    <!--
      [CONTENT CONTAINER]
    -->
    <div class="p-6 flex flex-col gap-4">

      <!-- [HEADER SECTION] -->
      <div class="flex flex-col gap-1">
        <!--
          [TITLE]
        -->
        <h3 class="text-text-main text-xl font-semibold leading-snug group-hover:text-brand-primary transition-colors line-clamp-2">
          {{ article.markdownData.meta.title }}
        </h3>

        <!--
          [META INFO]
        -->
        <div class="text-sm text-text-muted font-medium font-sans flex items-center gap-2">
            <span *ngIf="article.markdownData.meta.author">
                {{ article.markdownData.meta.author }}
            </span>
            <span *ngIf="article.markdownData.meta.author && article.markdownData.meta.date">·</span>
            <span *ngIf="article.markdownData.meta.date">
                {{ article.markdownData.meta.date | date: 'yyyy/MM/dd' }}
            </span>
        </div>
      </div>

      <!--
        [SUMMARY/EXCERPT]
        - 優化：直接使用預先生成的 summary
        - 不需要 innerHTML，更安全
      -->
      <p class="text-text-main text-base leading-relaxed font-sans line-clamp-3 text-opacity-90">
        {{ article.markdownData.summary }}
      </p>

      <!--
        [TAGS]
      -->
      <div class="flex flex-wrap gap-2 pt-2" *ngIf="article.markdownData.meta.tags?.length">
        <span
          *ngFor="let tag of article.markdownData.meta.tags"
          class="bg-bg-subtle text-text-muted text-xs font-medium px-3 py-1.5 rounded-full transition-colors hover:bg-border-default cursor-pointer hover:text-text-main">
          #{{ tag }}
        </span>
      </div>

    </div>
  </a>
</div>
